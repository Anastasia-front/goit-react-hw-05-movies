{"version":3,"file":"static/js/544.f1122c39.chunk.js","mappings":"iRA6GA,UArGa,WACX,OAA4BA,EAAAA,EAAAA,UAASC,EAAAA,GAAAA,MAArC,eAAOC,EAAP,KAAeC,EAAf,KACA,GAA4BH,EAAAA,EAAAA,UAAS,CACnC,CACEI,GAAI,EACJC,YAAa,KACbC,MAAO,GACPC,eAAgB,GAChBC,aAAc,GACdC,aAAc,EACdC,WAAY,KARhB,eAAOC,EAAP,KAAeC,EAAf,KAWA,GAA0BZ,EAAAA,EAAAA,UAAS,GAAnC,eAAOa,EAAP,KAAcC,EAAd,KACA,GAAoCd,EAAAA,EAAAA,UAAS,GAA7C,eAAOe,EAAP,KAAmBC,EAAnB,KACA,GAA0BhB,EAAAA,EAAAA,UAAS,MAAnC,eAAOiB,EAAP,KAAcC,EAAd,KACA,GAA8BlB,EAAAA,EAAAA,WAAS,GAAvC,eAAOmB,EAAP,KAAgBC,EAAhB,MAEAC,EAAAA,EAAAA,YAAU,WAAM,wCAGd,8EACE,KACEC,EAAAA,EAAAA,IAAY,GAAGC,MAAK,SAAAC,GAClBR,EAAcQ,EAAKC,aACnBb,EAAUY,EAAKE,QAChB,IACDvB,EAAUF,EAAAA,GAAAA,SAIX,CAHC,MAAOgB,GACPC,EAASD,GACTd,EAAUF,EAAAA,GAAAA,SACX,CAVH,2CAHc,wBACdE,EAAUF,EAAAA,GAAAA,SACV0B,aAAaC,QAAQ,YAAa,GAFpB,mCAedC,EACD,GAAE,KAEHR,EAAAA,EAAAA,YAAU,WAAM,wCACd,kGAEQR,GAASE,EAAa,KAF9B,iCAGkCO,EAAAA,EAAAA,IAAYT,GAAOU,MAAK,SAAAO,GAAC,OAAIA,EAAEJ,OAAN,IAH3D,OAGYK,EAHZ,OAIMnB,GAAU,SAAAoB,GAAC,wBAAQA,IAAR,OAAcD,GAAd,IAJjB,uDAOIb,EAAS,EAAD,IAPZ,0DADc,uBAAC,WAAD,wBAWdW,EACD,GAAE,CAAChB,EAAOE,IAaX,OANMA,EAAa,MAAQF,GACvBO,GAAW,IAMb,gCACGlB,IAAWD,EAAAA,GAAAA,WACV,iCACE,eAAIgC,MAAO,CAAEC,SAAU,QAAvB,6BACA,UAAC,IAAD,CACED,MAAO,CAAEE,SAAU,WACnBC,WAAYzB,EAAO0B,OACnBC,KAnBY,WACpBxB,GAAS,SAAAkB,GAAC,OAAIA,EAAI,CAAR,GACX,EAkBSO,eAAgBC,KAAKC,MACnBC,OAAOf,aAAagB,QAAQ,cAE9BC,QAAQC,EAAAA,EAAAA,MACR1B,QAASA,EACT2B,QAAQ,eAAIb,MAAO,CAAEc,UAAW,UAAxB,wBACRC,YACE,cAAGf,MAAO,CAAEc,UAAW,UAAvB,UACE,0DAZN,WAgBE,SAAC,IAAD,CAAWpC,OAAQA,EAAQsC,QAAS,kBAAMC,EAAAA,EAAAA,KAAUC,EAAAA,EAAAA,MAAhB,KACnCA,EAAAA,EAAAA,MAAc,MACb,UAAC,IAAD,CAAMF,QAAS,kBAAMG,EAAAA,EAAAA,KAAN,EAAf,iBACK,SAAC,MAAD,CAAWC,KAAM,cAM7BnD,IAAWD,EAAAA,GAAAA,WACV,+EAAuDgB,EAAvD,OAEDf,IAAWD,EAAAA,GAAAA,UACV,qEAIP,C","sources":["pages/Home/Home.jsx"],"sourcesContent":["import { getTrending, STATUS } from 'serviceAPI/fetch';\nimport MovieList from 'components/MovieList/MovieList';\nimport { GoUp } from 'pages/Movies/Movies.styled';\nimport { HiArrowUp } from 'react-icons/hi';\nimport { useState, useEffect } from 'react';\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport { scrollPos, scrollTop, infiniteHeight, boxScroll } from 'utils/scroll';\n\nconst Home = () => {\n  const [status, setStatus] = useState(STATUS.idle);\n  const [movies, setMovies] = useState([\n    {\n      id: 0,\n      poster_path: null,\n      title: '',\n      original_title: '',\n      release_date: '',\n      vote_average: 0,\n      vote_count: 0,\n    },\n  ]);\n  const [pages, setPages] = useState(2);\n  const [totalPages, setTotalPages] = useState(2);\n  const [error, setError] = useState(null);\n  const [hasMore, setHasMore] = useState(true);\n\n  useEffect(() => {\n    setStatus(STATUS.pending);\n    localStorage.setItem('scrollPos', 0);\n    async function fetchData() {\n      try {\n        getTrending(1).then(info => {\n          setTotalPages(info.total_pages);\n          setMovies(info.results);\n        });\n        setStatus(STATUS.resolved);\n      } catch (error) {\n        setError(error);\n        setStatus(STATUS.rejected);\n      }\n    }\n    fetchData();\n  }, []);\n\n  useEffect(() => {\n    async function fetchData() {\n      try {\n        if (pages <= totalPages / 100) {\n          const arrayOfMovies = await getTrending(pages).then(r => r.results);\n          setMovies(i => [...i, ...arrayOfMovies]);\n        }\n      } catch (error) {\n        setError(error);\n      }\n    }\n    fetchData();\n  }, [pages, totalPages]);\n\n  const fetchMoreData = () => {\n    setPages(i => i + 1);\n  };\n\n  const reachTheEnd = () => {\n    if (totalPages / 100 === pages) {\n      setHasMore(false);\n    }\n  };\n  reachTheEnd();\n\n  return (\n    <>\n      {status === STATUS.resolved && (\n        <>\n          <h1 style={{ fontSize: '20px' }}>Trending today</h1>\n          <InfiniteScroll\n            style={{ overflow: 'visible' }}\n            dataLength={movies.length}\n            next={fetchMoreData}\n            initialScrollY={JSON.parse(\n              window.localStorage.getItem('scrollPos')\n            )}\n            height={infiniteHeight()}\n            hasMore={hasMore}\n            loader={<h4 style={{ textAlign: 'center' }}>Loading...</h4>}\n            endMessage={\n              <p style={{ textAlign: 'center' }}>\n                <b>Yay! You have seen it all ;D</b>\n              </p>\n            }\n          >\n            <MovieList movies={movies} onClick={() => scrollPos(boxScroll())} />\n            {boxScroll() > 1000 && (\n              <GoUp onClick={() => scrollTop()}>\n                UP <HiArrowUp size={24} />\n              </GoUp>\n            )}\n          </InfiniteScroll>\n        </>\n      )}\n      {status === STATUS.rejected && (\n        <h3>Something went wrong on API... The messege error `{error}`</h3>\n      )}\n      {status === STATUS.pending && (\n        <h3>Please wait, information is loading...</h3>\n      )}\n    </>\n  );\n};\n\nexport default Home;\n"],"names":["useState","STATUS","status","setStatus","id","poster_path","title","original_title","release_date","vote_average","vote_count","movies","setMovies","pages","setPages","totalPages","setTotalPages","error","setError","hasMore","setHasMore","useEffect","getTrending","then","info","total_pages","results","localStorage","setItem","fetchData","r","arrayOfMovies","i","style","fontSize","overflow","dataLength","length","next","initialScrollY","JSON","parse","window","getItem","height","infiniteHeight","loader","textAlign","endMessage","onClick","scrollPos","boxScroll","scrollTop","size"],"sourceRoot":""}