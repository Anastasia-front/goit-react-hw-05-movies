"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[141],{141:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var r,a,i,o=n(433),s=n(861),u=n(439),c=n(757),l=n.n(c),h=n(87),p=n(791),f=n(168),x=n(444),v=n(128),d=x.ZP.div(r||(r=(0,f.Z)(["\n  display: inline-flex;\n  align-items: center;\n  margin-bottom: 16px;\n  text-transform: uppercase;\n  position: relative;\n"]))),g=x.ZP.input(a||(a=(0,f.Z)(["\n  padding: 8px 32px 8px 8px;\n  border-radius: 4px;\n  border: 1px solid #7c5400;\n  font: inherit;\n"]))),m=(0,x.ZP)(v.G4C)(i||(i=(0,f.Z)(["\n  width: 20px;\n  height: 20px;\n  position: absolute;\n  top: 9px;\n  right: 6px;\n"]))),w=n(184),S=function(e){var t=e.value,n=e.onChange,r=e.onSubmit;return(0,w.jsx)(d,{children:(0,w.jsxs)("form",{onSubmit:r,children:[(0,w.jsx)(g,{type:"text",value:t,onChange:function(e){return n(e.target.value)}}),(0,w.jsx)(m,{})]})})},Z=n(387),y=n(47),_=n(771),b=function(){var e,t=(0,p.useState)(""),n=(0,u.Z)(t,2),r=n[0],a=n[1],i=(0,p.useState)(null),c=(0,u.Z)(i,2),f=c[0],x=c[1],v=(0,h.lr)(),d=(0,u.Z)(v,2),g=d[0],m=d[1],b=null!==(e=g.get("query"))&&void 0!==e?e:"",j=(0,p.useState)((function(){var e;return null!==(e=JSON.parse(window.localStorage.getItem("movieSearch")))&&void 0!==e?e:[{id:0,poster_path:null,title:"",original_title:"",release_date:"",vote_average:0,vote_count:0}]})),k=(0,u.Z)(j,2),C=k[0],Y=k[1],I=(0,p.useState)(1),P=(0,u.Z)(I,2),A=P[0],J=P[1],N=(0,p.useState)({page:3,results:[],total_results:0,total_pages:0}),O=(0,u.Z)(N,2),q=O[0],D=O[1],E=(0,p.useState)(!0),F=(0,u.Z)(E,2),L=F[0],M=F[1];(0,p.useEffect)((function(){window.localStorage.setItem("movieSearch",JSON.stringify(C))}),[C]),(0,p.useEffect)((function(){function e(){return(e=(0,s.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(A<=q.page)){e.next=7;break}return e.next=4,(0,Z.iY)(r,A).then((function(e){return e.results}));case 4:t=e.sent,Y((function(e){return[].concat((0,o.Z)(e),(0,o.Z)(t))})),J((function(e){return e+1}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),x(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[A,q,r]);""===b&&C.length>=0&&window.localStorage.setItem("movieSearch",JSON.stringify([{id:0,poster_path:null,title:"",original_title:"",release_date:"",vote_average:0,vote_count:0}]));q.total_results===C.length&&M(!1);var G=1===C.length&&""===r&&""===b,T=1===C.length&&""!==r,z=C.length>1&&""!==b;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(S,{value:b,onChange:function(e){m(""!==e?{query:e}:{})},onSubmit:function(e){function t(){return(t=(0,s.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,Z.iY)(b,A).then((function(e){return e.results}));case 3:t=e.sent,Y(t),J((function(e){return e+1})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),x(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}e.preventDefault(),a(b),function(){t.apply(this,arguments)}()}}),G&&(0,w.jsx)("h3",{children:"Find movie that you want to watch above..."}),z&&(0,w.jsx)(_.Z,{dataLength:C.length,next:function(){function e(){return(e=(0,s.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,Z.iY)(r,A).then((function(e){return e}));case 3:t=e.sent,D(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),x(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},hasMore:L,loader:(0,w.jsx)("h4",{style:{textAlign:"center"},children:"Loading... "}),endMessage:(0,w.jsx)("p",{style:{textAlign:"center"},children:(0,w.jsx)("b",{children:"Yay! You have seen it all ;D"})}),children:(0,w.jsx)(y.Z,{movies:C})}),T&&(0,w.jsx)("h3",{children:"Sorry, there are no movies with that name..."}),null!==f&&(0,w.jsxs)("h3",{children:["Something went wrong on API... The messege error `",f,"`"]})]})}}}]);
//# sourceMappingURL=141.325f0008.chunk.js.map