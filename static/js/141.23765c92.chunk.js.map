{"version":3,"file":"static/js/141.23765c92.chunk.js","mappings":"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","sources":["components/SearchBox/SearchBox.styled.js","components/SearchBox/SearchBox.jsx","pages/Movies/Movies.jsx"],"sourcesContent":["import styled from 'styled-components';\nimport { HiSearch } from 'react-icons/hi';\n\nexport const Wrapper = styled.div`\n  display: inline-flex;\n  align-items: center;\n  margin-bottom: 16px;\n  text-transform: uppercase;\n  position: relative;\n`;\n\nexport const Input = styled.input`\n  padding: 8px 32px 8px 8px;\n  border-radius: 4px;\n  border: 1px solid #7c5400;\n  font: inherit;\n`;\n\nexport const Icon = styled(HiSearch)`\n  width: 20px;\n  height: 20px;\n  position: absolute;\n  top: 9px;\n  right: 6px;\n`;\n","import { Wrapper, Input, Icon } from './SearchBox.styled';\nimport PropTypes from 'prop-types';\n\nconst SearchBox = ({ value, onChange, onSubmit }) => {\n  return (\n    <Wrapper>\n      <form onSubmit={onSubmit}>\n        <Input\n          type=\"text\"\n          value={value}\n          onChange={e => onChange(e.target.value)}\n        />\n        <Icon />\n      </form>\n    </Wrapper>\n  );\n};\nexport default SearchBox;\n\nSearchBox.propTypes = {\n  value: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n};\n","import { useSearchParams } from 'react-router-dom';\nimport { useState, useEffect } from 'react';\nimport SearchBox from 'components/SearchBox/SearchBox';\nimport { GoUp } from './Movies.styled';\nimport { HiArrowUp } from 'react-icons/hi';\nimport { getSearchByKeyWord } from 'serviceAPI/fetch';\nimport MovieList from 'components/MovieList/MovieList';\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport {\n  scrollPos,\n  scrollTop,\n  resetScrollPos,\n  handleScroll,\n} from 'utils/scroll';\n\nconst Movies = () => {\n  const [scrollPosition, setScrollPosition] = useState(0);\n  const [error, setError] = useState(null);\n  const [searchParams, setSearchParams] = useSearchParams();\n  const movieName = searchParams.get('query') ?? '';\n  const [search, setSearch] = useState(searchParams.get('query') ?? '');\n  // const [hasMore, setHasMore] = useState(true);\n  const [movie, setMovie] = useState([]);\n  const [pages, setPages] = useState(1);\n\n  // const [totalPages, setTotalPages] = useState(2);\n\n  useEffect(() => {\n    window.addEventListener('scroll', handleScroll(setScrollPosition));\n\n    return () => {\n      window.removeEventListener('scroll', handleScroll(setScrollPosition));\n    };\n  }, []);\n\n  useEffect(() => {\n    if (search === '') {\n      return;\n    }\n    if (pages === 1) {\n      async function fetchData() {\n        try {\n          getSearchByKeyWord(search, pages).then(info => {\n            setMovie(info.results);\n          });\n        } catch (error) {\n          setError(error);\n        }\n      }\n      fetchData();\n    }\n    if (pages > 1) {\n      async function fetchData() {\n        try {\n          getSearchByKeyWord(search, pages).then(info => {\n            setMovie(i => [...i, ...info.results]);\n          });\n        } catch (error) {\n          setError(error);\n        }\n      }\n      fetchData();\n    }\n  }, [pages, search]);\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    setSearch(movieName);\n    setPages(1);\n  };\n\n  const updateQueryString = query => {\n    const nextParams = query !== '' ? { query } : {};\n    setSearchParams(nextParams);\n  };\n\n  const fetchMoreData = () => {\n    setPages(i => i + 1);\n  };\n\n  // const reachTheEnd = () => {\n  //   if (movie.length !== 0 && movie.length >= pages * 20) {\n  //     setHasMore(false);\n  //   } else {\n  //     return;\n  //   }\n  // };\n  // reachTheEnd();\n\n  resetScrollPos(scrollPosition);\n\n  const firstRender = movie.length === 0 && search === '' && movieName === '';\n  const noResults =\n    movie.length === 0 && pages === 1 && search !== '' && movieName !== '';\n  const goodResponse = movie.length > 1 && movieName !== '';\n\n  return (\n    <>\n      <SearchBox\n        value={movieName}\n        onChange={updateQueryString}\n        onSubmit={handleSubmit}\n      />\n      {firstRender && <h3>Find movie that you want to watch above...</h3>}\n\n      {goodResponse && (\n        <InfiniteScroll\n          dataLength={movie.length}\n          next={fetchMoreData}\n          // scrollThreshold={1}\n          height={1400}\n          hasMore={true}\n          loader={<h4 style={{ textAlign: 'center' }}>Loading... </h4>}\n          endMessage={\n            <p style={{ textAlign: 'center' }}>\n              <b>Yay! You have seen it all ;D</b>\n            </p>\n          }\n        >\n          <MovieList movies={movie} onClick={scrollPos} />\n          {scrollPosition > 1000 && (\n            <GoUp onClick={scrollTop}>\n              UP <HiArrowUp size={24} />\n            </GoUp>\n          )}\n        </InfiniteScroll>\n      )}\n\n      {noResults && <h3>Sorry, there are no movies with that name...</h3>}\n\n      {error !== null && (\n        <h3>Something went wrong on API... The messege error `{error}`</h3>\n      )}\n    </>\n  );\n};\n\nexport default Movies;\n"],"names":["Wrapper","styled","Input","Icon","HiSearch","value","onChange","onSubmit","type","e","target","useState","scrollPosition","setScrollPosition","error","setError","useSearchParams","searchParams","setSearchParams","movieName","get","search","setSearch","movie","setMovie","pages","setPages","useEffect","window","addEventListener","handleScroll","removeEventListener","fetchData","getSearchByKeyWord","then","info","results","i","resetScrollPos","firstRender","length","noResults","goodResponse","query","event","preventDefault","dataLength","next","height","hasMore","loader","style","textAlign","endMessage","MovieList","movies","onClick","scrollPos","scrollTop","size"],"sourceRoot":""}