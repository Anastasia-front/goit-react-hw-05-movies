{"version":3,"file":"static/js/19.e8e91eca.chunk.js","mappings":"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","sources":["../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/objectSpread2.js","components/SearchBox/SearchBox.styled.js","components/SearchBox/SearchBox.jsx","pages/Movies/Movies.jsx"],"sourcesContent":["export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}","import styled from 'styled-components';\nimport { HiSearch } from 'react-icons/hi';\n\nexport const Wrapper = styled.div`\n  display: inline-flex;\n  align-items: center;\n  margin-bottom: 16px;\n  text-transform: uppercase;\n  position: relative;\n`;\n\nexport const Input = styled.input`\n  padding: 8px 32px 8px 8px;\n  border-radius: 4px;\n  border: 1px solid #7c5400;\n  font: inherit;\n`;\n\nexport const Icon = styled(HiSearch)`\n  width: 20px;\n  height: 20px;\n  position: absolute;\n  top: 9px;\n  right: 6px;\n`;\n","import { Wrapper, Input, Icon } from './SearchBox.styled';\nimport PropTypes from 'prop-types';\n\nconst SearchBox = ({ value, onChange, onSubmit }) => {\n  return (\n    <Wrapper>\n      <form onSubmit={onSubmit}>\n        <Input\n          type=\"text\"\n          value={value}\n          onChange={e => onChange(e.target.value)}\n        />\n        <Icon />\n      </form>\n    </Wrapper>\n  );\n};\nexport default SearchBox;\n\nSearchBox.propTypes = {\n  value: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n};\n","import { useSearchParams } from 'react-router-dom';\nimport { useState, useEffect } from 'react';\nimport SearchBox from 'components/SearchBox/SearchBox';\nimport { GoUp } from './Movies.styled';\nimport { HiArrowUp } from 'react-icons/hi';\nimport { getSearchByKeyWord } from 'serviceAPI/fetch';\nimport MovieList from 'components/MovieList/MovieList';\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport { scrollPos, scrollTop, resetScrollPos } from 'utils/scroll';\n\nconst Movies = () => {\n  const [search, setSearch] = useState('');\n  const [scrollPosition, setScrollPosition] = useState(0);\n  const [error, setError] = useState(null);\n  const [searchParams, setSearchParams] = useSearchParams();\n  const movieName = searchParams.get('query') ?? '';\n  const [movie, setMovie] = useState(() => {\n    return (\n      JSON.parse(window.localStorage.getItem('movieSearch')) ??\n      Array.from({\n        id: 0,\n        poster_path: null,\n        title: '',\n        original_title: '',\n        release_date: '',\n        vote_average: 0,\n        vote_count: 0,\n      })\n    );\n  });\n  const [pages, setPages] = useState(1);\n  const [allInfo, setAllInfo] = useState({\n    page: 2,\n    results: [],\n    total_results: 0,\n    total_pages: 0,\n  });\n  const [hasMore, setHasMore] = useState(true);\n\n  useEffect(() => {\n    window.localStorage.setItem('movieSearch', JSON.stringify(movie));\n  }, [movie]);\n\n  useEffect(() => {\n    if (allInfo.page <= allInfo.total_pages) {\n      async function fetchData() {\n        try {\n          const arrayOfMovies = await getSearchByKeyWord(\n            search,\n            allInfo.page\n          ).then(r => r.results);\n          setMovie(i => [...i, ...arrayOfMovies]);\n          setAllInfo(prevState => ({\n            ...prevState,\n            page: prevState.page + 1,\n          }));\n        } catch (error) {\n          setError(error);\n        }\n      }\n      fetchData();\n    }\n    const handleScroll = () => {\n      const position = window.pageYOffset;\n      setScrollPosition(position);\n    };\n\n    window.addEventListener('scroll', handleScroll);\n\n    return () => {\n      window.removeEventListener('scroll', handleScroll);\n    };\n  }, [allInfo, search]);\n\n  const cleanMovieSearch = () => {\n    if (movieName === '' && movie.length >= 0) {\n      window.localStorage.setItem(\n        'movieSearch',\n        JSON.stringify([\n          {\n            id: 0,\n            poster_path: null,\n            title: '',\n            original_title: '',\n            release_date: '',\n            vote_average: 0,\n            vote_count: 0,\n          },\n        ])\n      );\n    }\n  };\n  cleanMovieSearch();\n\n  const reachTheEnd = () => {\n    // const docHeight = document.documentElement.scrollHeight;\n    // const currentPos = window.innerHeight + window.pageYOffset;\n\n    // if (currentPos >= docHeight) {\n    if (allInfo.total_results === movie.length) {\n      // alert('The end!');\n      setHasMore(false);\n    }\n    // }\n  };\n  reachTheEnd();\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    setSearch(movieName);\n\n    async function fetchData() {\n      try {\n        const objectOfMovie = await getSearchByKeyWord(movieName, pages).then(\n          r => r.results\n        );\n        setMovie(objectOfMovie);\n        setPages(i => i + 1);\n      } catch (error) {\n        setError(error);\n      }\n    }\n    fetchData();\n  };\n\n  const updateQueryString = query => {\n    const nextParams = query !== '' ? { query } : {};\n    setSearchParams(nextParams);\n  };\n  const firstRender = movie.length === 1 && search === '' && movieName === '';\n  const noResults = (movie.length === 1 || movie.length === 0) && search !== '';\n  const goodResponse = movie.length > 1 && movieName !== '';\n\n  const fetchMoreData = () => {\n    if (movie.length !== 0) {\n      async function getTotalPages() {\n        try {\n          const tot = await getSearchByKeyWord(search, pages).then(r => r);\n          setAllInfo(tot);\n        } catch (error) {\n          setError(error);\n        }\n      }\n      getTotalPages();\n    }\n  };\n\n  resetScrollPos(scrollPosition);\n\n  return (\n    <>\n      <SearchBox\n        value={movieName}\n        onChange={updateQueryString}\n        onSubmit={handleSubmit}\n      />\n      {firstRender && <h3>Find movie that you want to watch above...</h3>}\n\n      {goodResponse && (\n        <InfiniteScroll\n          dataLength={movie.length}\n          next={fetchMoreData}\n          hasMore={hasMore}\n          loader={<h4 style={{ textAlign: 'center' }}>Loading... </h4>}\n          endMessage={\n            <p style={{ textAlign: 'center' }}>\n              <b>Yay! You have seen it all ;D</b>\n            </p>\n          }\n        >\n          <MovieList movies={movie} onClick={scrollPos} />\n          {scrollPosition > 1000 && (\n            <GoUp onClick={scrollTop}>\n              UP <HiArrowUp size={24} />\n            </GoUp>\n          )}\n        </InfiniteScroll>\n      )}\n\n      {noResults && <h3>Sorry, there are no movies with that name...</h3>}\n\n      {error !== null && (\n        <h3>Something went wrong on API... The messege error `{error}`</h3>\n      )}\n    </>\n  );\n};\n\nexport default Movies;\n"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","Wrapper","styled","Input","Icon","HiSearch","onChange","onSubmit","type","e","useState","search","setSearch","scrollPosition","setScrollPosition","error","setError","useSearchParams","searchParams","setSearchParams","movieName","get","JSON","parse","window","localStorage","getItem","Array","from","id","poster_path","title","original_title","release_date","vote_average","vote_count","movie","setMovie","pages","setPages","page","results","total_results","total_pages","allInfo","setAllInfo","hasMore","setHasMore","useEffect","setItem","stringify","fetchData","getSearchByKeyWord","then","r","arrayOfMovies","prevState","handleScroll","position","pageYOffset","addEventListener","removeEventListener","firstRender","noResults","goodResponse","resetScrollPos","query","event","objectOfMovie","preventDefault","dataLength","next","getTotalPages","tot","loader","style","textAlign","endMessage","MovieList","movies","onClick","scrollPos","scrollTop","size"],"sourceRoot":""}