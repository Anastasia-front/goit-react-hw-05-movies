{"version":3,"file":"static/js/19.9ca319b4.chunk.js","mappings":"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","sources":["../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/objectSpread2.js","components/SearchBox/SearchBox.styled.js","components/SearchBox/SearchBox.jsx","pages/Movies/Movies.jsx"],"sourcesContent":["export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}","import styled from 'styled-components';\nimport { HiSearch } from 'react-icons/hi';\n\nexport const Wrapper = styled.div`\n  display: inline-flex;\n  align-items: center;\n  margin-bottom: 16px;\n  text-transform: uppercase;\n  position: relative;\n`;\n\nexport const Input = styled.input`\n  padding: 8px 32px 8px 8px;\n  border-radius: 4px;\n  border: 1px solid #7c5400;\n  font: inherit;\n`;\n\nexport const Icon = styled(HiSearch)`\n  width: 20px;\n  height: 20px;\n  position: absolute;\n  top: 9px;\n  right: 6px;\n`;\n","import { Wrapper, Input, Icon } from './SearchBox.styled';\nimport PropTypes from 'prop-types';\n\nconst SearchBox = ({ value, onChange, onSubmit }) => {\n  return (\n    <Wrapper>\n      <form onSubmit={onSubmit}>\n        <Input\n          type=\"text\"\n          value={value}\n          onChange={e => onChange(e.target.value)}\n        />\n        <Icon />\n      </form>\n    </Wrapper>\n  );\n};\nexport default SearchBox;\n\nSearchBox.propTypes = {\n  value: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n};\n","import { useSearchParams } from 'react-router-dom';\nimport { useState, useEffect } from 'react';\nimport SearchBox from 'components/SearchBox/SearchBox';\nimport { GoUp } from './Movies.styled';\nimport { HiArrowUp } from 'react-icons/hi';\nimport { getSearchByKeyWord } from 'serviceAPI/fetch';\nimport MovieList from 'components/MovieList/MovieList';\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport { scrollPos, scrollTop, resetScrollPos } from 'utils/scroll';\n\nconst Movies = () => {\n  const [search, setSearch] = useState('');\n  const [scrollPosition, setScrollPosition] = useState(0);\n  const [error, setError] = useState(null);\n  const [searchParams, setSearchParams] = useSearchParams();\n  const movieName = searchParams.get('query') ?? '';\n  const [hasMore, setHasMore] = useState(true);\n  const [movie, setMovie] = useState(() => {\n    return (\n      JSON.parse(window.localStorage.getItem('movieSearch')) ??\n      Array.from({\n        id: 0,\n        poster_path: null,\n        title: '',\n        original_title: '',\n        release_date: '',\n        vote_average: 0,\n        vote_count: 0,\n      })\n    );\n  });\n  const [allInfo, setAllInfo] = useState({\n    page: 1,\n    results: [],\n    total_results: 0,\n    total_pages: 0,\n  });\n\n  useEffect(() => {\n    window.localStorage.setItem('movieSearch', JSON.stringify(movie));\n  }, [movie]);\n\n  useEffect(() => {\n    if (\n      allInfo.page <= allInfo.total_pages / 10 &&\n      allInfo.results.length !== 0\n    ) {\n      async function fetchData() {\n        try {\n          const arrayOfMovies = await getSearchByKeyWord(\n            search,\n            allInfo.page\n          ).then(r => r.results);\n          setMovie(i => [...i, ...arrayOfMovies]);\n          setAllInfo(prevState => ({\n            ...prevState,\n            page: prevState.page + 1,\n          }));\n        } catch (error) {\n          setError(error);\n        }\n      }\n      fetchData();\n    }\n    const handleScroll = () => {\n      const position = window.pageYOffset;\n      setScrollPosition(position);\n    };\n\n    window.addEventListener('scroll', handleScroll);\n\n    return () => {\n      window.removeEventListener('scroll', handleScroll);\n    };\n  }, [allInfo, search]);\n\n  const cleanMovieSearch = () => {\n    if (movieName === '' && movie.length >= 0) {\n      window.localStorage.setItem(\n        'movieSearch',\n        JSON.stringify([\n          {\n            id: 0,\n            poster_path: null,\n            title: '',\n            original_title: '',\n            release_date: '',\n            vote_average: 0,\n            vote_count: 0,\n          },\n        ])\n      );\n    }\n  };\n  cleanMovieSearch();\n\n  const reachTheEnd = () => {\n    // const docHeight = document.documentElement.scrollHeight;\n    // const currentPos = window.innerHeight + window.pageYOffset;\n\n    // if (currentPos >= docHeight) {\n    if (allInfo.total_results === movie.length) {\n      // alert('The end!');\n      setHasMore(false);\n    }\n    // }\n  };\n  reachTheEnd();\n\n  const handleSubmit = event => {\n    setAllInfo({\n      page: 1,\n      results: [],\n      total_results: 0,\n      total_pages: 0,\n    });\n    event.preventDefault();\n    async function fetchData() {\n      try {\n        const objectOfMovie = await getSearchByKeyWord(\n          movieName,\n          allInfo.page\n        ).then(r => r.results);\n        setMovie(objectOfMovie);\n        setSearch(movieName);\n        setAllInfo(prevState => ({\n          ...prevState,\n          page: 2,\n        }));\n      } catch (error) {\n        setError(error);\n      }\n    }\n    fetchData();\n  };\n\n  const updateQueryString = query => {\n    const nextParams = query !== '' ? { query } : {};\n    setSearchParams(nextParams);\n  };\n\n  const fetchMoreData = () => {\n    // setHasMore(true);\n    if (movie.length !== 0 && allInfo.page !== 1) {\n      async function getTotalPages() {\n        try {\n          const tot = await getSearchByKeyWord(search, allInfo.page).then(\n            r => r\n          );\n          setAllInfo(tot);\n          // setHasMore(false);\n        } catch (error) {\n          setError(error);\n        }\n      }\n      getTotalPages();\n    }\n  };\n\n  resetScrollPos(scrollPosition);\n\n  const firstRender =\n    (movie.length === 1 || movie.length === 0) &&\n    search === '' &&\n    movieName === '';\n  const noResults = (movie.length === 1 || movie.length === 0) && search !== '';\n  const goodResponse = movie.length > 1 && movieName !== '';\n\n  return (\n    <>\n      <SearchBox\n        value={movieName}\n        onChange={updateQueryString}\n        onSubmit={handleSubmit}\n      />\n      {firstRender && <h3>Find movie that you want to watch above...</h3>}\n\n      {goodResponse && (\n        <InfiniteScroll\n          dataLength={movie.length}\n          next={fetchMoreData}\n          scrollThreshold={1}\n          hasMore={hasMore}\n          loader={<h4 style={{ textAlign: 'center' }}>Loading... </h4>}\n          endMessage={\n            <p style={{ textAlign: 'center' }}>\n              <b>Yay! You have seen it all ;D</b>\n            </p>\n          }\n        >\n          <MovieList movies={movie} onClick={scrollPos} />\n          {scrollPosition > 1000 && (\n            <GoUp onClick={scrollTop}>\n              UP <HiArrowUp size={24} />\n            </GoUp>\n          )}\n        </InfiniteScroll>\n      )}\n\n      {noResults && <h3>Sorry, there are no movies with that name...</h3>}\n\n      {error !== null && (\n        <h3>Something went wrong on API... The messege error `{error}`</h3>\n      )}\n    </>\n  );\n};\n\nexport default Movies;\n"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","Wrapper","styled","Input","Icon","HiSearch","onChange","onSubmit","type","e","useState","search","setSearch","scrollPosition","setScrollPosition","error","setError","useSearchParams","searchParams","setSearchParams","movieName","get","hasMore","setHasMore","JSON","parse","window","localStorage","getItem","Array","from","id","poster_path","title","original_title","release_date","vote_average","vote_count","movie","setMovie","page","results","total_results","total_pages","allInfo","setAllInfo","useEffect","setItem","stringify","fetchData","getSearchByKeyWord","then","r","arrayOfMovies","prevState","handleScroll","position","pageYOffset","addEventListener","removeEventListener","resetScrollPos","firstRender","noResults","goodResponse","query","event","objectOfMovie","preventDefault","dataLength","next","getTotalPages","tot","scrollThreshold","loader","style","textAlign","endMessage","MovieList","movies","onClick","scrollPos","scrollTop","size"],"sourceRoot":""}